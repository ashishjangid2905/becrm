{% extends 'home.html' %} {% load static %} {% block content %}
  <div class="container-fluid mt-3">
    <form method="GET" class="row g-3">
      <div class="col-md-4 gap-3 d-flex justify-content-between">
        <input type="text" class="form-control" name="q" placeholder="Search" />
        <button type="submit" class="btn btn-primary">Search</button>
      </div>
    </form>
  </div>
  <div class="container d-flex justify-content-center">
    <h5 class="display-5 my-4">Sample List</h5>
  </div>
  <div class="container-fluid">
    <table class="table table-hover sample-table">
      <thead>
        <tr>
          <th scope="col">S.No</th>
          <th scope="col">Sample Id</th>
          <th scope="col">User</th>
          <th scope="col">Email</th>
          <th scope="col">Type</th>
          <th scope="col">Format</th>
          <th scope="col">Country</th>
          <th scope="col">Hs Code</th>
          <th scope="col">Product</th>
          <th scope="col">Shiper</th>
          <th scope="col">Consignee</th>
          <th scope="col">Foreign Country</th>
          <th scope="col">Port</th>
          <th scope="col">Period</th>
          <th scope="col">Client Name</th>
          <th scope="col">Status</th>
          <th scope="col"></th>
        </tr>
      </thead>
      {% for sample in user_samples %}
        <tbody>
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ sample.sample_id }}</td>
            <td>{{ sample.user }}</td>
            <td>{{ sample.user.email }}</td>
            <td>{{ sample.report_type }}</td>
            <td>{{ sample.report_format }}</td>
            <td>{{ sample.country }}</td>
            <td>{{ sample.hs_code }}</td>
            <td>{{ sample.product }}</td>
            <td>{{ sample.shipper }}</td>
            <td>{{ sample.consignee }}</td>
            <td>{{ sample.foreign_country }}</td>
            <td>{{ sample.port }}</td>
            <td>{{ sample.get_month_display }}/{{ sample.year }}</td>
            <td>{{ sample.client_name }}</td>
            <td>{{ sample.status }}</td>
            <td>
              {% if sample.user == request.user %}
                {% if sample.status != 'received' %}
                  <a href="{% url 'sample:edit_sample' sample.slug %}" class="edit-btn"><i class="ti ti-edit"></i></a>
                {% else %}
                  <a class="edit-btn"><i class="ti ti-file-check"></i></a>
                {% endif %}
              {% else %}
                {% if sample.status == 'received' %}
                  <a class="edit-btn"><i class="ti ti-send"></i></a>
                {% endif %}
              {% endif %}
            </td>
          </tr>
        </tbody>
        {% empty %}
        <tr>
          <td colspan="17">No Sample request</td>
        </tr>
      {% endfor %}
    </table>
  </div>

  <div class="pagination">
    <span class="step-links">
      {% if user_samples.has_previous %}
        <a href="?page=1">&laquo;</a>
        <a href="?page={{ user_samples.previous_page_number }}">{{ user_samples.previous_page_number }}</a>
      {% endif %}
      <span class="current">{{ user_samples.number }}</span>
      {% if user_samples.has_next %}
        <a href="?page={{ user_samples.next_page_number }}">{{ user_samples.next_page_number }}</a>
        <span>...</span>
        <a href="?page={{ user_samples.paginator.num_pages }}">&raquo;</a>
      {% endif %}
    </span>
    <span>No of Pages {{ user_samples.paginator.num_pages }}</span>
  </div>
{% endblock %}
