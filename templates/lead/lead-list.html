{% extends 'home.html' %} {% load static %} {% block content %} {% comment %}
add Contact Form as Popup Modal {% endcomment %}
<div
  class="modal fade"
  id="uploadLeads"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4
          class="modal-title fs-5 text-primary-emphasis"
          id="exampleModalLabel"
        >
          <i class="ti ti-clipboard-plus"></i> Import Leads
        </h4>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form
            class="row g-3 d-flex justify-content-center"
            action="{% url 'lead:upload_Leads' %}"
            method="post"
            enctype="multipart/form-data"
          >
            {% csrf_token %}
            <div class="col-10">
              <div class="mb-3">
                <label for="formFileSm" class="form-label"
                  >Upload Your Leads</label
                >
                <input
                  class="form-control form-control-sm"
                  id="formFileSm"
                  type="file"
                  name="file"
                  accept=".csv"
                  required
                />
              </div>
              <p class="">
                download:
                <span
                  ><a
                    href="{% url 'lead:download_template' %}"
                    class="text-danger-emphasis"
                    >template file</a
                  ></span
                >
              </p>
            </div>
            <div class="modal-footer">
              <button
                type="reset"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button type="submit" class="btn btn-primary" name="upload_leads">
                Import
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% comment %} Popup ended here {% endcomment %}

<div class="container-fluid my-3">
  <div class="d-flex justify-content-between mt-5 mb-3">
    <div class="d-flex w-75">
      <form class="d-flex w-50" action="" method="get" role="search">
        <input type="text" class="form-control" name="q" placeholder="Search" />
        <button class="btn btn-outline-success mx-1" type="submit">
          Search
        </button>
      </form>
      <div>
        <a
          href="{% url 'lead:leads_list' %}"
          class="btn btn-outline-warning mx-1"
          >Clear Filter</a
        >
        <a href="{% url 'lead:add_lead' %}" class="btn btn-outline-primary mx-1"
          >Add Lead</a
        >
      </div>
    </div>
    <div class="float-end">
      <a
        href="{% url 'lead:export_lead' %}"
        class="btn btn-outline-success mx-1"
        ><i class="ti ti-download"></i> Export Lead</a
      >
      <a
        class="btn btn-outline-primary mx-1"
        data-bs-toggle="modal"
        data-bs-target="#uploadLeads"
        ><i class="ti ti-upload"></i> Upload Lead</a
      >
    </div>
  </div>
  <div
    class="container-fluid p-0 table-responsive border"
    style="height: 400px; overflow-y: auto; scrollbar-width: thin"
  >
    <table class="table table-sm table-bordered align-middle table-hover m-0">
      <thead class="table-primary position-sticky top-0 align-middle">
        <tr>
          <th class="fw-medium" scope="col">S.N.</th>
          <th class="fw-medium" scope="col">Company Name</th>
          <th class="fw-medium" scope="col">Gstin</th>
          <th class="fw-medium" scope="col">Address</th>
          <th class="fw-medium" scope="col">Industry</th>
          <th class="fw-medium" scope="col">Inserted</th>
          <th class="fw-medium text-nowrap" scope="col">Team Member</th>
          <th class="fw-medium" scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for lead in user_leads %}
        <tr>
          <th scope="row">{{ forloop.counter }}</th>
          <td class="text-wrap">{{ lead.company_name }}</td>
          <td class="text-wrap">
            {% if lead.gstin != None %}{{ lead.gstin }}{% endif %}
          </td>
          <td class="text-wrap">
            {{ lead.address1 }} {{ lead.address2 }} {{ lead.city }}
            {{lead.state}} {{ lead.country }}
          </td>
          <td class="text-wrap">{{ lead.industry }}</td>
          <td class="text-wrap">{{ lead.created_at }}</td>
          <td class="text-nowrap">{{ lead.user }}</td>
          <td>
            <a
              class="btn p-0 text-primary mx-1"
              href="{% url 'lead:lead' lead.id %}"
              ><i class="ti ti-details"></i
            ></a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="12">No Lead Added</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="container-fluid mt-3">
    <nav aria-label="Page navigation example">
      <ul class="flex-row pagination pagination-sm">
        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
      </ul>
    </nav>
  </div>
  <!-- Paginations -->
</div>
{% endblock %}
